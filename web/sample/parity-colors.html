<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>산차별 색상 샘플</title>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Malgun Gothic', sans-serif;
      background: #f5f5f5;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #2a5298;
      margin-bottom: 30px;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    .chart-section {
      background: white;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .chart-title {
      font-size: 16px;
      font-weight: bold;
      color: #333;
      margin-bottom: 10px;
      padding-bottom: 10px;
      border-bottom: 2px solid #2a5298;
    }
    .chart-subtitle {
      font-size: 12px;
      color: #666;
      margin-bottom: 15px;
    }
    .chart-container {
      height: 300px;
    }
    .color-palette {
      display: flex;
      gap: 5px;
      margin-top: 15px;
      flex-wrap: wrap;
    }
    .color-box {
      width: 60px;
      height: 40px;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      color: white;
      text-shadow: 0 1px 2px rgba(0,0,0,0.3);
    }
    .code-block {
      background: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 6px;
      padding: 12px;
      margin-top: 15px;
      font-family: 'Consolas', monospace;
      font-size: 11px;
      overflow-x: auto;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>산차별 색상 그라데이션 샘플</h1>

    <!-- 1. 블루 단색 그라데이션 (옅은색 → 짙은색) -->
    <div class="chart-section">
      <div class="chart-title">1. 블루 단색 그라데이션 (Light → Dark)</div>
      <div class="chart-subtitle">1산부터 순차적으로 짙어지는 파란색 계열</div>
      <div class="chart-container" id="chart1"></div>
      <div class="color-palette" id="palette1"></div>
      <div class="code-block" id="code1"></div>
    </div>

    <!-- 2. 그린 단색 그라데이션 -->
    <div class="chart-section">
      <div class="chart-title">2. 그린 단색 그라데이션 (Light → Dark)</div>
      <div class="chart-subtitle">1산부터 순차적으로 짙어지는 초록색 계열</div>
      <div class="chart-container" id="chart2"></div>
      <div class="color-palette" id="palette2"></div>
      <div class="code-block" id="code2"></div>
    </div>

    <!-- 3. 블루-퍼플 듀얼 그라데이션 -->
    <div class="chart-section">
      <div class="chart-title">3. 블루 → 퍼플 듀얼 그라데이션</div>
      <div class="chart-subtitle">파란색에서 보라색으로 자연스럽게 전환</div>
      <div class="chart-container" id="chart3"></div>
      <div class="color-palette" id="palette3"></div>
      <div class="code-block" id="code3"></div>
    </div>

    <!-- 4. 틸-블루 듀얼 그라데이션 -->
    <div class="chart-section">
      <div class="chart-title">4. 틸 → 블루 듀얼 그라데이션</div>
      <div class="chart-subtitle">청록색에서 파란색으로 전환</div>
      <div class="chart-container" id="chart4"></div>
      <div class="color-palette" id="palette4"></div>
      <div class="code-block" id="code4"></div>
    </div>

    <!-- 5. 오렌지-레드 듀얼 그라데이션 -->
    <div class="chart-section">
      <div class="chart-title">5. 오렌지 → 레드 듀얼 그라데이션</div>
      <div class="chart-subtitle">주황색에서 빨간색으로 전환 (경고/위험 표현)</div>
      <div class="chart-container" id="chart5"></div>
      <div class="color-palette" id="palette5"></div>
      <div class="code-block" id="code5"></div>
    </div>

    <!-- 6. 현재 레인보우 (비교용) -->
    <div class="chart-section">
      <div class="chart-title">6. 현재 사용중인 레인보우 색상 (비교용)</div>
      <div class="chart-subtitle">다양한 색상으로 구분 - 현재 PARITY_COLORS</div>
      <div class="chart-container" id="chart6"></div>
      <div class="color-palette" id="palette6"></div>
      <div class="code-block" id="code6"></div>
    </div>

  </div>

  <script>
    // 테스트 데이터
    const xData = ['1산', '2산', '3산', '4산', '5산', '6산', '7산', '8산', '9산', '10산↑'];
    const data = [45, 52, 48, 42, 38, 32, 25, 18, 12, 8];

    // 색상 생성 함수: 단색 그라데이션 (옅은색 → 짙은색)
    function generateSingleGradient(baseHue, count = 10) {
      const colors = [];
      for (let i = 0; i < count; i++) {
        // 밝기: 85% → 35% (점점 어두워짐)
        const lightness = 85 - (i * 5);
        // 채도: 40% → 70% (점점 진해짐)
        const saturation = 40 + (i * 3);
        colors.push(`hsl(${baseHue}, ${saturation}%, ${lightness}%)`);
      }
      return colors;
    }

    // 색상 생성 함수: 듀얼 컬러 그라데이션
    function generateDualGradient(hue1, hue2, count = 10) {
      const colors = [];
      for (let i = 0; i < count; i++) {
        const ratio = i / (count - 1);
        const hue = hue1 + (hue2 - hue1) * ratio;
        // 밝기: 70% → 40%
        const lightness = 70 - (ratio * 30);
        // 채도: 50% → 65%
        const saturation = 50 + (ratio * 15);
        colors.push(`hsl(${hue}, ${saturation}%, ${lightness}%)`);
      }
      return colors;
    }

    // HSL to HEX 변환
    function hslToHex(hslStr) {
      const match = hslStr.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);
      if (!match) return hslStr;

      let h = parseInt(match[1]) / 360;
      let s = parseInt(match[2]) / 100;
      let l = parseInt(match[3]) / 100;

      let r, g, b;
      if (s === 0) {
        r = g = b = l;
      } else {
        const hue2rgb = (p, q, t) => {
          if (t < 0) t += 1;
          if (t > 1) t -= 1;
          if (t < 1/6) return p + (q - p) * 6 * t;
          if (t < 1/2) return q;
          if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
          return p;
        };
        const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
        const p = 2 * l - q;
        r = hue2rgb(p, q, h + 1/3);
        g = hue2rgb(p, q, h);
        b = hue2rgb(p, q, h - 1/3);
      }

      const toHex = x => {
        const hex = Math.round(x * 255).toString(16);
        return hex.length === 1 ? '0' + hex : hex;
      };

      return `#${toHex(r)}${toHex(g)}${toHex(b)}`;
    }

    // 색상 팔레트 정의
    const colorSets = {
      // 1. 블루 단색 (Hue: 210)
      blue: generateSingleGradient(210, 10),

      // 2. 그린 단색 (Hue: 140)
      green: generateSingleGradient(140, 10),

      // 3. 블루 → 퍼플 (210 → 280)
      bluePurple: generateDualGradient(210, 280, 10),

      // 4. 틸 → 블루 (180 → 220)
      tealBlue: generateDualGradient(180, 220, 10),

      // 5. 오렌지 → 레드 (30 → 0)
      orangeRed: generateDualGradient(30, 0, 10),

      // 6. 현재 레인보우
      rainbow: [
        '#ff6384', '#ff8a9b', '#36a2eb', '#4ab8f5', '#4bc0c0',
        '#9966ff', '#c274ff', '#ff9f40', '#ffce56', '#c9cbcf'
      ]
    };

    // 차트 생성 함수
    function createChart(containerId, colors, title) {
      const chart = echarts.init(document.getElementById(containerId));

      const option = {
        tooltip: {
          trigger: 'axis',
          axisPointer: { type: 'shadow' }
        },
        grid: {
          left: '3%',
          right: '4%',
          bottom: '3%',
          top: '10%',
          containLabel: true
        },
        xAxis: {
          type: 'category',
          data: xData,
          axisLabel: { fontSize: 11 }
        },
        yAxis: {
          type: 'value',
          axisLabel: { fontSize: 11 }
        },
        series: [{
          name: '두수',
          type: 'bar',
          data: data.map((value, idx) => ({
            value,
            itemStyle: {
              color: colors[idx],
              borderRadius: [4, 4, 0, 0]
            }
          })),
          barWidth: '60%'
        }]
      };

      chart.setOption(option);
      return chart;
    }

    // 팔레트 표시 함수
    function showPalette(containerId, colors) {
      const container = document.getElementById(containerId);
      container.innerHTML = colors.map((color, idx) =>
        `<div class="color-box" style="background: ${color}">${idx + 1}산</div>`
      ).join('');
    }

    // 코드 블록 생성 함수
    function showCode(containerId, colors, name) {
      const hexColors = colors.map(c => c.startsWith('#') ? c : hslToHex(c));
      const container = document.getElementById(containerId);
      container.innerHTML = `export const ${name} = [\n  ${hexColors.map(c => `'${c}'`).join(',\n  ')},\n] as const;`;
    }

    // 차트 및 팔레트 초기화
    const charts = [];

    charts.push(createChart('chart1', colorSets.blue));
    showPalette('palette1', colorSets.blue);
    showCode('code1', colorSets.blue, 'PARITY_BLUE');

    charts.push(createChart('chart2', colorSets.green));
    showPalette('palette2', colorSets.green);
    showCode('code2', colorSets.green, 'PARITY_GREEN');

    charts.push(createChart('chart3', colorSets.bluePurple));
    showPalette('palette3', colorSets.bluePurple);
    showCode('code3', colorSets.bluePurple, 'PARITY_BLUE_PURPLE');

    charts.push(createChart('chart4', colorSets.tealBlue));
    showPalette('palette4', colorSets.tealBlue);
    showCode('code4', colorSets.tealBlue, 'PARITY_TEAL_BLUE');

    charts.push(createChart('chart5', colorSets.orangeRed));
    showPalette('palette5', colorSets.orangeRed);
    showCode('code5', colorSets.orangeRed, 'PARITY_ORANGE_RED');

    charts.push(createChart('chart6', colorSets.rainbow));
    showPalette('palette6', colorSets.rainbow);
    showCode('code6', colorSets.rainbow, 'PARITY_RAINBOW');

    // 리사이즈 대응
    window.addEventListener('resize', () => {
      charts.forEach(chart => chart.resize());
    });
  </script>
</body>
</html>
